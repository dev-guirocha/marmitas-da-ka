<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Conta - Marmitas da Ka</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="dashboard-style.css">
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
    </div>

    <header>
        <nav class="navbar">
            <a href="#welcome" class="logo">Marmitas da <span class="logo-ka">Ka</span></a>
            <div class="nav-links" id="navLinks">
                <a href="#pacotes">Pacotes</a>
                <a href="#cardapio">Cardápio</a>
                <a href="meus-pedidos.html">Meus Pedidos</a>
                <a href="../../index.html" class="mobile-only">Voltar para Home</a>
            </div>
            <div class="nav-actions">
                <div class="user-info"><span id="user-info-name">Olá, Guirocha</span><button id="logoutBtn" class="btn-logout" tittle="Sair da conta">Sair</button></div>
                <div class="cart-info hidden" style="display: flex; align-items: center; gap: 10px;">
                    <a href="../../checkout/finalizar-pedido.html" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count">0</span>
                        <span id="cart-total">R$ 0,00</span>
                    </a>
                
                    <!-- ✅ NOVO: botão Esvaziar + badge de créditos -->
                    <button id="clearCartBtn" class="btn-clear-cart" type="button" title="Esvaziar carrinho">
                        Esvaziar
                    </button>
                    <span id="credits-badge" class="credits-badge">Créditos: 0</span>
                </div>
                <a href="../../admin/admin.html" class="btn btn-secondary hidden admin-panel-link" id="adminLink">
                    <i class="fas fa-screwdriver-wrench"></i> Administração
                </a>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main>
        <section id="welcome" class="section-container">
            <div class="hero-box">
                <h1>Sua jornada saudável continua aqui</h1>
                <p>Escolha um pacote ou monte seu cardápio com nossos pratos frescos e deliciosos.</p>
                <div class="hero-buttons">
                    <a href="#pacotes" class="btn btn-primary">Ver Pacotes</a>
                    <a href="#cardapio" class="btn btn-secondary">Ver Cardápio</a>
                </div>
            </div>
        </section>

        <section id="pacotes" class="section-container">
            <h2>Nossos Pacotes</h2>
            <p class="section-subtitle">Escolha um plano para começar e depois selecione suas marmitas favoritas no cardápio abaixo.</p>
            <div class="pacotes-grid">
                <div class="pacotes-grid">
                    <div class="pacote-card">
                        <img src="https://images.unsplash.com/photo-1540420773420-3366772f4999?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Pacote de 5 marmitas">
                        <h3>Plano Praticidade</h3><h4>5 marmitas (semanal)</h4>
                        <p>Ideal para garantir seus almoços saudáveis durante a semana.</p>
                        <span class="price">R$ 99,90</span>
                        <button type="button" class="btn btn-primary add-package-to-cart" data-price="99.90" data-name="Plano Praticidade" data-credits="5" data-package-key="semanal">Quero Esse</button>
                    </div>
                    <div class="pacote-card popular">
                        <span class="tag">Mais Popular</span>
                        <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Pacote de 10 marmitas">
                        <h3>Plano Constância</h3><h4>10 marmitas (quinzenal)</h4>
                        <p>Economia e praticidade para duas semanas de alimentação equilibrada.</p>
                        <span class="price">R$ 189,90</span>
                        <button type="button" class="btn btn-primary add-package-to-cart" data-price="189.90" data-name="Plano Constância" data-credits="10" data-package-key="quinzenal">Quero Esse</button>
                    </div>
                    <div class="pacote-card">
                        <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Pacote de 20 marmitas">
                        <h3>Plano Equilíbrio</h3><h4>20 marmitas (mensal)</h4>
                        <p>A solução completa para um mês inteiro sem se preocupar com as refeições.</p>
                        <span class="price">R$ 359,90</span>
                        <button type="button" class="btn btn-primary add-package-to-cart" data-price="359.90" data-name="Plano Equilíbrio" data-credits="20" data-package-key="mensal">Quero Esse</button>
                    </div>
                    <div class="pacote-card personalizado">
                        <i class="fas fa-pencil-alt fa-3x"></i>
                        <h3>Pacote Personalizado</h3><h4>Você no comando</h4>
                        <p>Escolha quantas marmitas vão cuidar de você durante o mês.</p>
                        <a
                            href="https://wa.me/5579991428025?text=Tenho%20interesse%20em%20um%20pacote%20personalizado,%20poderia%20me%20ajudar?"
                            class="btn btn-primary"
                            target="_blank"
                            rel="noopener noreferrer"
                        >
                            Falar no WhatsApp
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="cart-status" id="cartStatus">
                <div class="status-content">
                    <i class="fas fa-info-circle"></i>
                    <span>Selecione um pacote para começar a adicionar marmitas</span>
                </div>
            </div>
        </section>

        <section id="cardapio" class="section-container">
            <h2>Nosso Cardápio</h2>
            <p class="section-subtitle">Clique em "Adicionar" para escolher a quantidade de cada prato.</p>
            
            <div class="credits-info" id="creditsInfo">
                <i class="fas fa-coins"></i>
                <span id="credits-count">0</span> créditos disponíveis
            </div>
            
            <div class="cardapio-wrapper">
                <button class="slider-arrow prev" aria-label="Prato anterior">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="menu-slider">
                    <div class="menu-item" data-name="Frango Grelhado com Arroz e Feijão Fradinho">
                        <img src="/assets/prato1.png" alt="Frango Grelhado com Arroz e Feijão Fradinho">
                        <h3>Filé de frango grelhado, arroz com cúrcuma e salada de feijão fradinho</h3>
                        <p class="item-description">Delicioso filé de frango grelhado com arroz e um saboroso feijão fradinho.</p>
                        <div class="item-footer">
                            <div class="quantity-selector">
                                <button class="btn-qty minus" aria-label="Remover um">-</button>
                                <span class="quantity">0</span>
                                <button class="btn-qty plus" aria-label="Adicionar um">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="menu-item" data-name="Almôndegas com Macarrão">
                        <img src="/assets/prato2.png" alt="Almôndegas com Macarrão">
                        <h3>Almôndegas de patinho, macarrão de arroz (sem gluten) e mix de legumes</h3>
                        <p class="item-description">Almôndegas de carne suculentas ao molho de tomate caseiro com macarrão fusilli.</p>
                        <div class="item-footer">
                            <div class="quantity-selector">
                                <button class="btn-qty minus" aria-label="Remover um">-</button>
                                <span class="quantity">0</span>
                                <button class="btn-qty plus" aria-label="Adicionar um">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="menu-item" data-name="Patinho Moído">
                        <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Patinho Moído">
                        <h3>Patinho Moído</h3>
                        <p class="item-description">Carne de patinho moída e refogada, servida com macarrão integral.</p>
                        <div class="item-footer">
                            <div class="quantity-selector">
                                <button class="btn-qty minus" aria-label="Remover um">-</button>
                                <span class="quantity">0</span>
                                <button class="btn-qty plus" aria-label="Adicionar um">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="menu-item" data-name="Lasanha de Berinjela">
                        <img src="https://images.unsplash.com/photo-1606755962773-d324e0a13086?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Lasanha de Berinjela">
                        <h3>Lasanha de Berinjela</h3>
                        <p class="item-description">Lasanha de berinjela com queijo cottage e molho de tomate caseiro.</p>
                        <div class="item-footer">
                            <div class="quantity-selector">
                                <button class="btn-qty minus" aria-label="Remover um">-</button>
                                <span class="quantity">0</span>
                                <button class="btn-qty plus" aria-label="Adicionar um">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="slider-arrow next" aria-label="Próximo prato">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <div class="navigation-dots">
                <span class="dot active" data-index="0"></span>
                <span class="dot" data-index="1"></span>
                <span class="dot" data-index="2"></span>
                <span class="dot" data-index="3"></span>
            </div>
        </section>
        
        <section id="order-summary" class="section-container hidden">
            <h2>Resumo do Pedido</h2>
            <div class="order-summary-content">
                <div id="order-items"></div>
                <div class="order-total">
                    <strong>Total: <span id="order-total-price">R$ 0,00</span></strong>
                </div>
                <a href="../../checkout/finalizar-pedido.html" class="btn btn-primary btn-large">Finalizar Pedido</a>
            </div>
        </section>
    </main>
    
    <div class="floating-cart" id="floatingCart">
        <div class="cart-icon">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-badge" id="floatingCartCount">0</span>
        </div>
        <div class="cart-preview hidden">
            <h4>Seu Carrinho</h4>
            <div id="cart-preview-items"></div>
            <div class="cart-preview-total">
                Total: <span id="cart-preview-total">R$ 0,00</span>
            </div>
            <a href="../../checkout/finalizar-pedido.html" class="btn btn-primary btn-small">Finalizar Compra</a>
        </div>
    </div>

    <footer>
        <p>Criado com <i class="fas fa-heart"></i> por <a href="#" target="_blank">Dev.Guirocha</a></p>
        <p>&copy; 2025 Marmitas da Ka. Todos os direitos reservados.</p>
    </footer>

<div id="clearCartModal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2>Esvaziar Carrinho</h2>
        <p>O que deseja limpar?</p>
        <div class="modal-options">
            <button data-mode="1" class="btn btn-secondary">Apenas Itens</button>
            <button data-mode="2" class="btn btn-secondary">Apenas o Pacote</button>
            <button data-mode="3" class="btn btn-primary">Limpar Tudo</button>
        </div>
        <button id="closeModalBtn" class="modal-close-btn">&times;</button>
    </div>
</div>

<div id="upgradeModal" class="modal-overlay hidden">
    <div class="modal-content">
        <h2>Sugestão de Plano</h2>
        <p id="upgradeMessage" class="upgrade-message"></p>
        <div class="modal-options">
            <button id="upgradeAcceptBtn" class="btn btn-primary">Quero atualizar</button>
            <button id="upgradeDeclineBtn" class="btn btn-secondary">Manter plano atual</button>
        </div>
        <button id="upgradeCloseBtn" class="modal-close-btn">&times;</button>
    </div>
</div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="../../firebase-config.js"></script>

    <script src="dashboard-script.js"></script>
</body>
</html>
